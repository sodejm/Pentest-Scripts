import sys
from prance import ResolvingParser
from prettytable import PrettyTable

# Read in the file or URL
SWAGFILE = sys.argv[1]

# Set all json keys
PATHS = 'paths'
SUMMARY = 'summary'


# Parse the swagger file and assign the dicitonary var
PARSER = ResolvingParser(SWAGFILE)
SWAGDICT = PARSER.specification

# Init the table
TABLE = PrettyTable(["Path", "Method", "Summary"])

# Print The table
for PATH in SWAGDICT[PATHS].keys():
    # print(SWAGDICT['basePath'] +  key)
    for HTTPMETHOD in SWAGDICT[PATHS][PATH].keys():
        summary = SWAGDICT[PATHS][PATH][HTTPMETHOD][SUMMARY]
        TABLE.add_row([(SWAGDICT['basePath'] + PATH), HTTPMETHOD, summary])
print TABLE
 
